{
  "apiVersion": "v1",
  "kind": "Template",
  "metadata": {
    "name": "migpvbenchmark-migrations"
  },
  "objects": [
    {
      "apiVersion": "migration.openshift.io/v1alpha1",
      "kind": "MigPlan",
      "metadata": {
        "labels": {
          "controller-tools.k8s.io": "1.0"
        },
        "name": "${BENCHMARK_NAME}",
        "namespace": "openshift-migration"
      },
      "spec": {
        "srcMigClusterRef": {
          "name": "${SRC_MIGCLUSTER_REF}",
          "namespace": "openshift-migration"
        },
        "destMigClusterRef": {
          "name": "${DEST_MIGCLUSTER_REF}",
          "namespace": "openshift-migration"
        },
        "migStorageRef": {
          "name": "${MIGSTORAGE_REF}",
          "namespace": "openshift-migration"
        },
        "persistentVolumes": [{
          "capacity": "${VOLUME_CAPACITY}",
          "name": "hellovolume",
          "pvc": {
            "accessModes": [
              "readWriteOnce"
            ],
            "name": "hellopod-pvc",
            "namespace": "${BENCHMARK_NAME}"
          },
          "selection": {
            "action": "${VOLUME_ACTION}",
            "copyMethod": "${COPY_METHOD}",
            "storageClass": "${DEST_STORAGE_CLASS}"
          },
	  "supported": {
	    "actions": ["copy", "move"],
	    "copyMethods": ["filesystem", "snapshot"]
	  },
	  "storageClass": "${SRC_STORAGE_CLASS}"
        }],
        "namespaces": [
          "${BENCHMARK_NAME}"
        ]
      }
    },
    {
      "apiVersion": "migration.openshift.io/v1alpha1",
      "kind": "MigMigration",
      "metadata": {
        "labels": {
          "controller-tools.k8s.io": "1.0"
        },
        "name": "${BENCHMARK_NAME}",
        "namespace": "openshift-migration"
      },
      "spec": {
        "stage": "${{STAGE}}",
        "quiescePods": false,
        "keepAnnotations": false,
        "migPlanRef": {
          "name": "${BENCHMARK_NAME}",
          "namespace": "openshift-migration"
        }
      }
    }
  ],
  "parameters": [
    {
      "description": "Name of the benchmark namespace (autogenerated)",
      "displayName": "Benchmark Name",
      "name": "BENCHMARK_NAME",
      "required": true
    },
    {
      "description": "Name of the source cluster",
      "displayName": "srcMigClusterRef",
      "name": "SRC_MIGCLUSTER_REF",
      "required": true
    },
    {
      "description": "Name of the destination cluster",
      "displayName": "destMigClusterRef",
      "name": "DEST_MIGCLUSTER_REF",
      "required": true
    },
    {
      "description": "Name of the migstorage to use",
      "displayName": "migStorageRef",
      "name": "MIGSTORAGE_REF",
      "required": true
    },
    {
      "description": "Volume Capacity",
      "displayName": "Volume Capacity",
      "name": "VOLUME_CAPACITY",
      "required": true
    },
    {
      "description": "Destination Storage Class",
      "displayName": "Destination Storage Class",
      "name": "DEST_STORAGE_CLASS",
      "required": true
    },
    {
      "description": "Source Storage Class",
      "displayName": "Source Storage Class",
      "name": "SRC_STORAGE_CLASS",
      "required": true
    },    
    {
      "description": "Volume action (copy vs move)",
      "displayName": "Volume Action",
      "name": "VOLUME_ACTION",
      "required": true
    },
    {
      "description": "Volume copy method (filesystem vs snapshot)",
      "displayName": "Copy Method",
      "name": "COPY_METHOD",
      "required": true
    },
    {
      "description": "Stage a migration",
      "displayName": "Stage",
      "name": "STAGE",
      "required": true
    }
  ]
}
